<html>
    <head>
<meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="jasmine.min.css">
        <script src="jasmine.min.js"></script>
        <script type="text/javascript" src="jasmine-html.min.js"></script>
        <script type="text/javascript" src="boot.min.js"></script>
    </head>
    <body>
    </body>
    <script type="text/javascript">
        var calculator={
            sum:function(x,y){
                return x+y
            }
        }

        // Paste in the test code here.
        describe('测试项目', function () {
            it('1 + 1 should equal 2', function () {

                expect(2).toBe(2);
            });
            it('对等对象', function () {
                var a={x:1,y:2};
                var b={y:2,x:1};
                expect(a).toEqual(b);
            });
            it('4 * 9 should equal 36', function () {
                expect(4*9).toBe(36);
            });
        });

        describe('Calculator', function() {
            var counter;
            beforeEach(function(){
                 counter = 0

            })
            it('can add a number', function() {
                counter = counter + 2; // counter was 0 before
                expect(counter).toEqual(2);
            });
            it('can multiply a number', function() {
                counter = counter * 5; // counter was 2 before
                expect(counter).toEqual(0);
            });
        });


        
describe("Jasmine内置Matcher示例：", function() {
 
    it("toBe Matcher用来执行 === 对比", function() {
        var a = 12;
        var b = a;
 
        expect(a).toBe(b);
        expect(a).not.toBe(null);
    });
 
    describe("toEqual判断两个对象是否相等：", function() {
 
        it("对比简单的值类型的变量", function() {
            var a = 12;
            expect(a).toEqual(12);
        });
 
        it("对比对象", function() {
            var foo = {
                a: 12,
                b: 34
            };
            var bar = {
                a: 12,
                b: 34
            };
            expect(foo).toEqual(bar);
        });
    });
 
    it("toMatch用来进行正则匹配", function() {
        var message = "foo bar baz";
 
        expect(message).toMatch(/bar/);
        expect(message).toMatch("bar");
        expect(message).not.toMatch(/quux/);
    });
 
    it("toBeDefined判断是否非undefined", function() {
        var a = {
            foo: "foo"
        };
 
        expect(a.foo).toBeDefined();
        expect(a.bar).not.toBeDefined();
    });
 
    it("toBeUndefined判断是否是undefined", function() {
        var a = {
            foo: "foo"
        };
 
        expect(a.foo).not.toBeUndefined();
        expect(a.bar).toBeUndefined();
    });
 
    it("toBeNull用来判断是否为null", function() {
        var a = null;
        var foo = "foo";
 
        expect(null).toBeNull();
        expect(a).toBeNull();
        expect(foo).not.toBeNull();
    });
 
    it("toBeTruthy执行布尔测试，判断值是否是，或者可以转换为true", function() {
        var a, foo = "foo";
 
        expect(foo).toBeTruthy();
        expect(a).not.toBeTruthy();
    });
 
    it("toBeFalsy和toBeTruthy相反", function() {
        var a, foo = "foo";
 
        expect(a).toBeFalsy();
        expect(foo).not.toBeFalsy();
    });
 
    it("toContain判断一个数组是否包含某个值", function() {
        var a = ["foo", "bar", "baz"];
 
        expect(a).toContain("bar");
        expect(a).not.toContain("quux");
    });
 
    it("toBeLessThan执行数字大小比较", function() {
        var pi = 3.1415926,
                e = 2.78;
 
        expect(e).toBeLessThan(pi);
        expect(pi).not.toBeLessThan(e);
    });
 
    it("toBeGreaterThan和toBeLessThan相反", function() {
        var pi = 3.1415926,
            e = 2.78;
 
        expect(pi).toBeGreaterThan(e);
        expect(e).not.toBeGreaterThan(pi);
    });
 
    it("toBeCloseTo示例", function() {
        var pi = 3.49,
            e = 3.1;
 
        expect(pi).not.toBeCloseTo(e, 2);
        expect(pi).toBeCloseTo(e, 0);
    });
 
    it("toThrow判断一个函数是否有抛出异常", function() {
        var foo = function() {
            return 1 + 2;
        };
        var bar = function() {
            return a + 1;
        };
 
        expect(foo).not.toThrow();
        expect(bar).toThrow();
    });
});






describe("Pending specs", function() {
    xit("can be declared 'xit'", function() {
        expect(true).toBe(false);
    });
 
    it("can be declared with 'it' but without a function");
 
    it("can be declared by calling 'pending' in the spec body", function() {
        expect(true).toBe(false);
        pending();
    });
});



describe("jasmine.any", function() {
    it("matches any value", function() {
        expect({}).toEqual(jasmine.any(Object));
        expect(12).toEqual(jasmine.any(Number));
        expect('12').toEqual(jasmine.any(String));
        expect([]).toEqual(jasmine.any(Array));
        expect(null).toEqual(jasmine.any(Object));
    });
 
    describe("when used with a spy", function() {
        it("is useful for comparing arguments", function() {
            var foo = jasmine.createSpy('foo');
            foo(12, function() {
                return true;
            });
 
            expect(foo).toHaveBeenCalledWith(jasmine.any(Number), jasmine.any(Function));
        });
    });
});



describe("jasmine.objectContaining", function() {
    var foo;
 
    beforeEach(function() {
        foo = {
            a: 1,
            b: 2,
            bar: "baz"
        };
    });
 
    it("matches objects with the expect key/value pairs", function() {
        expect(foo).toEqual(jasmine.objectContaining({
            bar: "baz"
        }));
        expect(foo).not.toEqual(jasmine.objectContaining({
            c: 37
        }));
    });
 
    describe("when used with a spy", function() {
        it("is useful for comparing arguments", function() {
            var callback = jasmine.createSpy('callback');
 
            callback({
                bar: "baz"
            });
 
            expect(callback).toHaveBeenCalledWith(jasmine.objectContaining({
                bar: "baz"
            }));
            expect(callback).not.toHaveBeenCalledWith(jasmine.objectContaining({
                c: 37
            }));
        });
    });
});




var customMatchers = {
  toBeGoofy: function(util, customEqualityTesters) {
    return {
      compare: function(actual, expected) {
        if (expected === undefined) {
          expected = '';
        }
        var result = {};
        console.log(expected);
        result.pass = util.equals(actual.hyuk, "gawrsh" + expected, customEqualityTesters);
        if (result.pass) {
          result.message = "通过了，通过了，通过了...";
        } else {
          result.message = "没通过，没通过，没通过...";
        }
        return result;
      }
    };
  }
};
 
describe("测试自定义错误信息", function() {
  beforeEach(function() {
    jasmine.addMatchers(customMatchers);
  });
 
  it("这是个失败的测试", function() {
    expect({
      hyuk: 'gawrsh'
    }).toBeGoofy('');
  });
});


describe("A spy", function() {
    var foo, bar = null;
 
    beforeEach(function() {
        foo = {
            setBar: function(value) {
                bar = value;
            } 
        };
 
        spyOn(foo, 'setBar');
 
        foo.setBar(123);
        foo.setBar(456, 'another param');
    });
 
    it("tracks that the spy was called", function() {
        expect(foo.setBar).toHaveBeenCalled();
    });
 
    it("tracks all the arguments of its calls", function() {
        expect(foo.setBar).toHaveBeenCalledWith(123);
        expect(foo.setBar).toHaveBeenCalledWith(456, 'another param');
    });
 
    it("stops all execution on a function", function() {
        expect(bar).toBeNull();
    });
});
</script>
</html>
